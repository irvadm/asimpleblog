{% extends 'base.html' %}
{% block title %}Post Detail - {{ post.title }}{% endblock %}


{% block main %}
<!-- Post section -->
<header class="pageHeader">
  {% if post.creator == request.user %}
  <a class="deletePostButton btn btn-danger btn-sm pullRight" href="{% url 'posts:post_delete' post.pk %}">Delete</a>
  <a class="editPostButton btn btn-warning btn-sm pullRight" href="{% url 'posts:post_update' post.pk %}">Edit</a>
  {% endif %}
  <h1 class="postTitle">{{ post.title }}</h1>
</header>

<div class="postInfo">
  <span>{{ post.creator }}</span>
  <span>&middot;</span>
  <span>{{ post.updated }}</span>
</div>

<hr>

<div class="postBody">
  <p>{{ post.body }}</p>
</div>

<!-- Comment section -->
<section id="commentSection">
  <header class="commentHeader">
    <a class="btn btn-primary btn-sm pullRight" href="{% url 'posts:comment_create' post_pk=post.pk %}">Add Comment</a>
    <h4>{{ post.comments.all.count }} Comments</h4>
  </header>

  <ul id="commentList">
    {% for comment in post.comments.all %}
    <li class="comment">
      <div class="commentContent">
        <p>{{ comment.content }}</p>
      </div>

      <div class="commentInfo">
        {% if comment.creator == request.user %}
        <a class="deleteComment pullRight" href="{% url 'posts:comment_delete' comment.pk %}">Delete</a>
        <a class="editComment pullRight" href="{% url 'posts:comment_update' comment.pk %}">Edit</a>
        {% endif %}
        <span>{{ comment.creator }}</span>
        <span>&middot;</span>
        <span>{{ comment.created|timesince }} ago</span>
      </div>

    </li>
    {% endfor %}
  </ul>
</section>
{% endblock %}